'use strict';(function(r){function n(a){a||(a={});var f=new Set,g=!1;return Object.assign(a,{on:function(b,c){if(!h(c))throw new TypeError(".on() needs a function");c.type=b;f.add(c);c.handle={on:function(){f.add(c);return c.handle},once:function(){return a.once(b,c)},off:function(){a.off(c);return c.handle}};return c.handle},once:function(b,c){function e(){c.apply(a,arguments);a.off(e)}a.off(c);return a.on(b,e)},off:function(b){f.has(b)&&f.delete(b)},emit:function(b){var c=arguments,a=this;!g&&0<
f.size&&function(){var d=[].slice.call(c,1),t=a;f.forEach(function(c){c.type!=b||g||c.apply(t,d)})}()},stopall:function(b){g="boolean"===typeof b?b:!0},defineHandle:function(b,c){c||(c=b);a[b]=function(b,d){return a[d?"once":"on"](c,b)}}})}function k(a){a||(a={});a=n(a);var f={Get:new Set,Set:new Set};l(a,"isObservable",m(!0));["$get","$set"].forEach(function(b){var c="$get"==b?"Get":"Set";l(a,b,m(function(b,a){h(b)&&(a=b,b="*");if(!h(a))throw Error("."+b+" no function");var g={prop:"string"===typeof b?
b:"*",fn:a},p={on:function(){f[c].add(g);return p},off:function(){f[c].delete(g);return p}};return p.on()}))});l(a,"$change",m(function(b,c){h(b)&&(c=b,b="*");if(!h(c))throw Error(".$change : no function");var a={prop:"string"===typeof b?b:"*",fn:c,multi:!0},d={on:function(){f.Get.add(a);f.Set.add(a);return d},off:function(){f.Get.delete(a);f.Set.delete(a);return d}};return d.on}));l(a,"get",m(function(b){if("get"!=b&&"set"!=b){var c=void 0;f.Get.forEach(function(e){if("*"===e.prop||e.prop===b)c=
e.multi?e.fn("get",b,a):e.fn(b,a)});return void 0!=c?c:a[b]}return a[b]}));l(a,"set",m(function(b,c){var e=void 0;f.Set.forEach(function(d){if("*"===d.prop||d.prop===b)e=d.multi?d.fn("set",b,c,a,Object.hasOwnProperty(a,b)):d.fn(b,c,a,Object.hasOwnProperty(a,b))});e=void 0!=e?e:c;q(e)&&!e.isObservable&&(e=k(e));a.emit("$uberset:"+b,e);a[b]=e}));for(var g in a)q(a[g])&&!a[g].isObservable&&(a[g]=k(a[g]));if("undefined"!=typeof Proxy)return new Proxy(a,{get:function(b,a){if("get"!=a&&"set"!=a){var e=
void 0;f.Get.forEach(function(d){if("*"===d.prop||d.prop===a)e=d.multi?d.fn("get",a,b):d.fn(a,b)});return void 0!=e?e:Reflect.get(b,a)}return Reflect.get(b,a)},set:function(a,c,e){var d=void 0,g=!1;f.Set.forEach(function(f){if("*"===f.prop||f.prop===c)g?(e=d,g=!1):g=!0,d=f.multi?f.fn("set",c,e,a,!Reflect.has(a,c)):f.fn(c,e,a,!Reflect.has(a,c))});d=void 0!=d?d:e;q(d)&&!d.isObservable&&(d=k(d));a.emit("$uberset:"+c,d);return Reflect.set(a,c,d)}});console.warn("This JavaScript Environment does not support Proxy, observables need to use the .set and .get accessors to work");
return a}var h=function(a){return"function"===typeof a},q=function(a){return"[object Object]"===toString.call(a)},l=Object.defineProperty,m=function(a,f,g){return{value:a,write:"boolean"===typeof f?f:!1,enumerable:"boolean"===typeof g?g:!1}};"undefined"!==typeof exports?module.exports={observable:k,eventsys:n}:(r.observable=k,r.eventsys=n)})(this);
